# Digital Canvas

## ‚ö†Ô∏è AI-Generated Project Disclaimer

**Note: This description about the project is also AI-generated.**

This project is approximately 95% generated by AI as an experiment to explore the capabilities of artificial intelligence in software development. While efforts have been made to ensure functionality, please be aware that:

1. Some features or components may not work as expected.
2. There might be inconsistencies or errors in the codebase.
3. The project structure and documentation may not follow best practices perfectly.

Use this project with caution and consider it a proof of concept rather than a production-ready application. We encourage users to review, test, and modify the code as needed. Your feedback and contributions are welcome to improve and refine this AI-generated project.

---

Digital Canvas is a Python-based application that displays images in a slideshow format. It uses OpenCV for image processing, Pillow for image handling, and Flask for the web interface. The application is designed to run on a digital photo frame or any other display device.

## Features

- üñºÔ∏è Display images in a slideshow format
- üé® Support for various image formats
- üîÑ Image scaling and rotation
- üì∫ Fullscreen mode
- üì° MQTT integration for remote control
- ‚öôÔ∏è Configuration management

## Requirements

- Python 3.6+
- Dependencies:
  - `opencv-python`
  - `Pillow`
  - `Flask`
  - `numpy`
  - `configparser`

## Installation

1. **Clone the repository:**

   ```sh
   git clone https://github.com/yourusername/digital-canvas.git
   cd digital-canvas
   ```

2. **Run the installer script:**

   ```sh
   ./installer.sh
   ```

   This script will:
   - Update the package list and install python3-tk
   - Create a virtual environment
   - Install the required packages

3. **Activate the virtual environment:**

   ```sh
   source venv/bin/activate
   ```

## Configuration

The application uses a configuration file named `config.json`. Here is an example configuration:

```json
{
    "image_folder": "images",
    "thumbnail_folder": "thumbnails",
    "frame_interval": 10,
    "transition_duration": 0,
    "media_orientation_filter": "both",
    "display_mode": "windowed",
    "web_interface_port": 7000,
    "mqtt_broker": "192.168.1.241",
    "mqtt_port": 1883,
    "mqtt_topic": "1/office/canvas-nuc",
    "device_name": "office-canvas",
    "theme": "dark-theme",
    "rotation": 0,
    "scale_mode": "fit",
    "plex_port": 32400,
    "allow_plex": true,
    "pause_when_plex_playing": true,
    "auto_brightness": true,
    "auto_rotation": false,
    "light_sensor_max_reading": 10000,
    "light_sensor_min_reading": 0,
    "playback_mode": "sequential",
    "time_on": "08:00",
    "time_off": "22:00"
}
```

## Usage

1. **Run the application:**

   ```sh
   python run.py
   ```

2. **Control the application:**

   | Key           | Action                    |
   |---------------|---------------------------|
   | Arrow keys    | Navigate between images   |
   | `f`           | Toggle fullscreen mode    |
   | `s`           | Toggle scale mode         |
   | `p`           | Pause the slideshow       |
   | `r`           | Resume the slideshow      |
   | `a`           | Rotate the image          |
   | `q` or `Esc`  | Quit the application      |

## MQTT Integration

The application supports MQTT for remote control. You can publish messages to the configured MQTT topic to control the slideshow. Here are some example messages:

- Change image: `{"command": "change_image", "index": 1}`
- Pause slideshow: `{"command": "pause"}`
- Resume slideshow: `{"command": "resume"}`

## Autostart Setup

To set up Digital Canvas to start automatically on boot:

1. Make the setup script executable:
   ```sh
   chmod +x setup_autostart.sh
   ```

2. Run the setup script with sudo:
   ```sh
   sudo ./setup_autostart.sh
   ```

This script will create a systemd service that starts Digital Canvas on boot.

To remove the autostart configuration:

1. Make the uninstall script executable:
   ```sh
   chmod +x uninstall_autostart.sh
   ```

2. Run the uninstall script with sudo:
   ```sh
   sudo ./uninstall_autostart.sh
   ```

This script will remove the systemd service and disable autostart for Digital Canvas.

## Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.